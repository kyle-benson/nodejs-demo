{
  "name": "Ocp-nodejs-demo",
  "tagline": "This demo shows a simple NodeJS Express server to demonstrate the AB Load Balancing capabilities of OpenShift Container Platform 3.3",
  "body": "\r\nThis demo will show how to use OpenShift's built in HAProxy capabilities to load balance across two NodeJs Express Pods\r\n\r\n1. Create basic node.js web app w/ git repo from a previous commit\r\n   ```\r\n   oc new-project balanced\r\n   oc new-app https://github.com/kyle-benson/ocp-nodejs-demo.git#b69a1b0f0c3195baa0dbd2ff600f8bebc38c7ade --name='app1'\r\n   ```\r\n  **NOTE! Do not create a route automatically for this exercise**\r\n\r\n2. Create route for initial pod\r\n    ```\r\n    oc expose svc/app1 --name=\"appab\" --hostname=appab-balanced.master.kbenson.co\r\n    ```\r\n\r\n3.\tStart testing route via curl\r\n    ```\r\n    while true; do curl appab-balanced.master.kbenson.co && echo && sleep 5; done\r\n    ```\r\n\r\n4. Annotate route\r\n\t  ```\r\n    oc get routes\r\n    oc annotate route/appab haproxy.router.openshift.io/balance=roundrobin\r\n    ```\r\n\r\n5. Create second nodejs pod from new branch or updated commit\r\n    ```\r\n    oc new-app https://github.com/kyle-benson/ocp-nodejs-demo.git --name=\"app2\"\r\n    ```\r\n7. Setup route to load balance between appA & appB\r\n\t Routes > Edit > Split Traffic\r\n  ![ocp route gif]( doc_gifs/ocp_AB_routes.gif \"Enabling an AB route in the UI\")\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}